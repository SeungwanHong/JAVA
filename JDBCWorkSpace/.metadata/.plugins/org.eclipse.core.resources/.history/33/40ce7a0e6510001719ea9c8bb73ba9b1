package testBoard.interDB.impl;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import testBoard.interDB.SQLSend;

public class SQLSender implements SQLSend{

	private Connection conn;
	private PreparedStatement pstmt;
	private ResultSet rs = null;
	
	public SQLSender(Connection conn, PreparedStatement pstmt) {
		// TODO Auto-generated constructor stub
		this.conn = conn;
		this.pstmt = pstmt;
	}
	@Override
	public ResultSet testsend(String id) {
		// TODO Auto-generated method stub
		String sql;
		sql ="SELECT * FROM TB_USER WHERE USERID = '" + id + "'";
		try {
			pstmt = conn.prepareStatement(sql);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			System.out.println("쿼리 전송애러");
		}
	
		try {
			rs = pstmt.executeQuery();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			System.out.println("결과값 받기 애러");
		}
		return rs;
		
	}


	@Override
	public ResultSet getdata(String sql) {
		// TODO Auto-generated method stub
		return null;
	}

	private int singcheck() {
		// TODO Auto-generated method stub
		int chjoin =1;
		String sql;
		sql = "SELECT COUNT(*) AS LOGIN_CNT " + "FROM TB_USER " + "WHERE USERID = ?";
		pstmt.setString(1, userid);
		rs = pstmt.executeQuery();
		while (rs.next()) {
			chjoin = rs.getInt("LOGIN_CNT");
		}
		return 0;
	}
	@Override
	public void signUp(String userid, String userpw, String username, String email) {
		// TODO Auto-generated method stub
		String sql;
		sql ="INSERT INTO TB_USER(USERID,USERPW,USERNAME,EMAIL,JOINDATE) "
									+ "VALUES(?,?,?,?,SYSDATE)";
		try {
			pstmt = conn.prepareStatement(sql);
			pstmt.setString(1, userid);
			pstmt.setString(2, userpw);
			pstmt.setString(3, username);
			pstmt.setString(4, email);
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			System.out.println("쿼리 전송애러");
		}
	
		try {
			rs = pstmt.executeQuery();
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
			System.out.println("결과값 받기 애러");
		}
		
	}


	@Override
	public void signIn() {
		// TODO Auto-generated method stub
		
	}
	


}
